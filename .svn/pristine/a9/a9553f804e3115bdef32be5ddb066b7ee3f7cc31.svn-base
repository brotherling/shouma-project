webpackJsonp([6],{"3ivO":function(t,e,i){"use strict";(function(t){var e=i("3cXf");i.n(e),i("2rmn").a}).call(e,i("9AUj"))},EU6q:function(t,e){},IPJp:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("3ivO");var o=i("buLL"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div1"},[i("v-header",{attrs:{header:t.head}}),t._v(" "),i("section",{staticClass:"profit"},[i("div",{staticClass:"profittop"},[t._v("基本信息")]),t._v(" "),i("yd-cell-group",[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[t._v("盘点原因")]),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"text",placeholder:"请输入"},slot:"right",model:{value:t.profitform.ASM_PY_80,callback:function(e){t.$set(t.profitform,"ASM_PY_80",e)},expression:"profitform.ASM_PY_80"}})],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[t._v("资产条码")]),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"text",placeholder:"请输入"},slot:"right",model:{value:t.profitform.ASM_PY_60,callback:function(e){t.$set(t.profitform,"ASM_PY_60",e)},expression:"profitform.ASM_PY_60"}})],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[t._v("资产名称")]),t._v(" "),i("yd-input",{ref:"ASM_PY_70",attrs:{slot:"right",type:"text",required:"",placeholder:"请输入"},slot:"right",model:{value:t.profitform.ASM_PY_70,callback:function(e){t.$set(t.profitform,"ASM_PY_70",e)},expression:"profitform.ASM_PY_70"}})],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[t._v("盘盈说明")]),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"text",placeholder:"请输入"},slot:"right",model:{value:t.profitform.ASM_PY_90,callback:function(e){t.$set(t.profitform,"ASM_PY_90",e)},expression:"profitform.ASM_PY_90"}})],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[t._v("规格型号")]),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"text",placeholder:"请输入"},slot:"right",model:{value:t.profitform.ASM_PY_100,callback:function(e){t.$set(t.profitform,"ASM_PY_100",e)},expression:"profitform.ASM_PY_100"}})],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[t._v("数量")]),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"number",placeholder:"请输入"},slot:"right",model:{value:t.profitform.ASM_PY_110,callback:function(e){t.$set(t.profitform,"ASM_PY_110",e)},expression:"profitform.ASM_PY_110"}})],1),t._v(" "),i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[t._v("存放位置")]),t._v(" "),i("yd-input",{attrs:{slot:"right",type:"text",placeholder:"请输入"},slot:"right",model:{value:t.profitform.ASM_PY_120,callback:function(e){t.$set(t.profitform,"ASM_PY_120",e)},expression:"profitform.ASM_PY_120"}})],1)],1),t._v(" "),i("div",{staticClass:"profitBottom"},[i("div",[t._v("资产图片")]),t._v(" "),i("div",{attrs:{id:"addimg"}},t._l(t.profitimg,function(t){return i("img",{directives:[{name:"preview",rawName:"v-preview",value:t.img,expression:"showimg.img"}],key:t.id,attrs:{src:t.img,alt:"","preview-title-enable":"false","preview-nav-enable":"false"}})}))])],1),t._v(" "),t.pic?i("div",{staticClass:"profitassetrule"},[i("el-button",{staticStyle:{width:"60%"},attrs:{type:"primary",icon:"mackimg"},on:{click:function(e){t.submit()}}},[t._v("保存")]),t._v(" "),i("el-button",{staticStyle:{width:"36%"},attrs:{type:"primary",icon:"photographimg"}},[t._v("拍照")]),t._v(" "),i("input",{staticClass:"Imgupload",attrs:{type:"file",accept:"image/*",capture:"camera",multiple:""},on:{change:function(e){t.selectpick(e)}}})],1):i("div",{staticClass:"profitassetrule",staticStyle:{"z-index":"2000"}},[i("el-button",{staticStyle:{width:"60%",background:"#409EFF",height:"35px"},attrs:{type:"primary"},on:{click:function(e){t.submit()}}},[t._v("保存")]),t._v(" "),i("yd-button",{staticStyle:{width:"36%",background:"#409EFF",display:"inline-block",height:"35px"},attrs:{size:"large"},nativeOn:{click:function(e){t.show1=!0}}},[t._v("拍照")]),t._v(" "),i("yd-actionsheet",{attrs:{items:t.myItems1,cancel:"取消"},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}})],1),t._v(" "),i("stockfoot",{attrs:{pcId:t.profitform.pcId,planId:t.profitform.planId,toggleIndex:2}})],1)},staticRenderFns:[]};var r=function(t){i("EU6q")},a=i("C7Lr")(o.a,s,!1,r,null,null);e.default=a.exports},buLL:function(t,e,i){"use strict";(function(t){var o=i("3cXf"),s=i.n(o),r=i("2rmn");e.a={name:"assetprofit",components:{stockfoot:r.a},data:function(){var e=this;return{head:"盘盈资产",profitform:{ASM_A1_10:this.$route.query.Id,pcId:this.$route.query.pcid,ASM_PY_60:this.$route.query.assetCode,ASM_PY_70:"",ASM_PY_80:"",ASM_PY_110:"",ASM_PY_90:"",ASM_PY_100:"",ASM_PY_120:"",planId:this.$route.query.planId,imgData:[]},profitimg:[],showimg:[],pic:"",show1:!1,myItems1:[{label:"拍照",callback:function(){e.getImage();var i=e;t.bus.$off("global.img"),t.bus.$on("global.img",function(t){i.profitform.imgData.push({img:t}),i.profitimg.push({img:t,id:""})})}},{label:"从相册中偷取",callback:function(){e.galleryImg();var i=e;t.bus.$off("global.img"),t.bus.$on("global.img",function(t){i.profitform.imgData.push({img:t}),i.profitimg.push({img:t,id:""})})}}]}},methods:{selectpick:function(t){for(var e=t.target,i=e.files.length,o=this,s=0;s<i;s++){var r=e.files[s],a=(e.files[s].size/1024/1024).toFixed("3"),l=new FileReader;l.onload=function(t){compress(t.target.result,a,function(t){o.profitform.imgData.push({img:t}),o.profitimg.push({img:t,id:a})})},l.readAsDataURL(r)}},submit:function(){var t=this,e={pcId:this.profitform.pcId,assetCode:this.profitform.ASM_PY_60};this.$http.get("/API/stockservice/IsExitAsset",{params:{data:s()(e)}},{emulateJSON:!0}).then(function(e){if("-1"==e.data.resultNum||"-2"==e.data.resultNum)if(t.profitform.ASM_A1_10=e.data.baseMeno1,t.$refs.ASM_PY_70.valid){var i=s()(t.profitform);t.$http.post("/API/stockservice/AddPwin",{"":i},{emulateJSON:!0}).then(function(e){e.data.resultNum>0&&(t.$message("保存成功"),t.$router.go(-1))}).catch(function(t){})}else t.$message({message:"资产名称不能为空",type:"warning"});else t.$dialog.alert({mes:e.data.resultMsg})})}},mounted:function(){this.judge(),this.pic=t.picth,console.log(this.pic,t.picth)}}}).call(e,i("9AUj"))}});
//# sourceMappingURL=6.e4682fb28e2aa64c69c4.js.map