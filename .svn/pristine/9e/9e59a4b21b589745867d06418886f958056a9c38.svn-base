webpackJsonp([18],{KT0H:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={name:"assetEdit",data:function(){return{parentMsg:this.$route.query.name,assetedata:[],fielddata:[],SortingData:"",page:1,scloll:"true",num:"",sort:"ASM_A1_20",order:"desc",descstring:"默认排序",Imgshow:"false",menuId:this.$route.query.id,url:this.$route.query.url,assetId:[]}},methods:{amend:function(){var t=this,s=this.assetId;1==this.assetId.length?this.$http.post("/API/assetservice/ValidataStatu",{assetIds:s},{emulateJSON:!0}).then(function(e){1==e.data.resultNum?t.$http.post("/API/assetservice/ValidataFreeze",{assetIds:s},{emulateJSON:!0}).then(function(s){console.log(s.data),1==s.data.resultNum?t.$router.push({path:"/assetAdd",query:{id:t.assetId}}):t.$dialog.alert({mes:s.data.resultMsg+"资产被占用或者冻结，不可以修改！"})}):t.$dialog.alert({mes:e.data.resultMsg+"资产已报废，不可以修改！"})}):this.$dialog.alert({mes:"只能选择一条进行修改"})},delAsset:function(){var t=this,s=this.assetId;console.log(s),0!=s.length?this.$http.post("/API/assetservice/ValidataFreeze",{assetIds:s},{emulateJSON:!0}).then(function(e){console.log(e.data),1==e.data.resultNum?t.$http.post("/API/assetservice/ValidataMainAsset",{assetIds:s},{emulateJSON:!0}).then(function(e){1==e.data.resultNum?t.$http.post("/API/assetservice/DeleteAsset",{assetIds:s},{emulateJSON:!0}).then(function(s){t.$dialog.confirm({title:"提示",mes:s.data.resultMsg,opts:[{txt:"确定",color:!0,callback:function(){t.sous()}}]})}):t.$dialog.alert({mes:e.data.resultMsg+"为主资产，将一并删除其下副签资产！"})}):t.$dialog.alert({mes:e.data.resultMsg+"资产被占用或者冻结，不可以删除！"})}):this.$dialog.alert({mes:"请选择要修改的数据"})},clickselect:function(t,s){var e=this.assetId;-1==e.indexOf(t)?e.push(t):e.splice($.inArray(t,e),1);var a=s.currentTarget;$(a).find("#selectImg").toggle(),$(a).find("#selectImgSuccess").toggle()},clicksao:function(){this.saoma(this.sous)},sous:function(t){void 0!=t&&(this.SortingData=t),this.assetId=[],this.page=1,this.assetedata=[],this.UploadData()},UploadData:function(){var t=this;this.scloll=!1,this.$http.post("/API/assetservice/GetAssetList",{menuId:this.menuId,pageNumber:this.page,pageSize:"10",sortName:this.sort,order:this.order,url:this.url,filter:this.SortingData},{emulateJSON:!0}).then(function(s){var e=JSON.parse(s.data);t.num=e.total,t.scloll=!0,e.rows.forEach(function(t){this.assetedata.push(t)},t)})},handleScroll:function(t){var s=t.target;if(s.scrollTop+s.offsetHeight==s.scrollHeight||s.scrollTop+s.offsetHeight==s.scrollHeight-1){if(this.page+=1,this.page>this.num/10+2)return void this.$message({message:"数据已经全部加载完",type:"warning"});this.scloll&&this.UploadData()}},clickseriation:function(t){for(var s=t.target,e=document.getElementsByClassName("seriationImg"),a=s.innerText,i=void 0,l=void 0,n=0;n<e.length;n++)e[n].style.display="none";switch(s.children[0].style.display="block",a){case"编码正序":i="ASM_A1_20",l="asc";break;case"编码倒叙":i="ASM_A1_20",l="desc";break;case"使用人员":i="useUserId",l="desc";break;case"购置日期正序":i="ASM_A1_290",l="asc";break;case"购置日期倒序":i="ASM_A1_290",l="desc";break;default:i="ASM_A1_20",l="desc"}this.descstring=a,this.sort=i,this.order=l,this.sous(),this.clickLeftImg()},clickLeftImg:function(){var t=document.getElementsByClassName("seriation"),s=document.getElementById("zhezhao");"none"==t[0].style.display?(t[0].style.display="block",s.style.display="block"):(t[0].style.display="none",s.style.display="none")}},mounted:function(){void 0!=this.$route.query.saodata&&(this.SortingData=this.$route.query.saodata),this.UploadData(),document.getElementsByClassName("seriationImg")[0].style.display="block"},watch:{$route:function(t,s){this.parentMsg=t.query.name,this.menuId=t.query.id,this.url=t.query.url,this.sous()}}},i={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"div1"},[a("v-header",{attrs:{header:t.parentMsg}}),t._v(" "),a("section",{staticClass:"edit_assetcontent"},[a("div",{staticClass:"conetenttop"},[a("div",{staticClass:"Topleft"},[t._v(t._s(this.descstring)),a("span",{staticClass:"LeftImg",on:{click:function(s){t.clickLeftImg()}}})]),t._v(" "),a("div",{staticClass:"TopRight"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:""},model:{value:t.SortingData,callback:function(s){t.SortingData=s},expression:"SortingData"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(s){t.sous()}},slot:"append"})],1),t._v(" "),a("img",{staticClass:"RightImg",attrs:{src:e("vKV0")},on:{click:function(s){t.clicksao()}}})],1)]),t._v(" "),a("div",{staticClass:"seriation"},[a("ul",[a("li",{on:{click:function(s){t.clickseriation(s)}}},[t._v("默认排序"),a("span",{staticClass:"seriationImg"})]),t._v(" "),a("li",{on:{click:function(s){t.clickseriation(s)}}},[t._v("编码正序"),a("span",{staticClass:"seriationImg"})]),t._v(" "),a("li",{on:{click:function(s){t.clickseriation(s)}}},[t._v("编码倒序"),a("span",{staticClass:"seriationImg"})]),t._v(" "),a("li",{on:{click:function(s){t.clickseriation(s)}}},[t._v("使用人员"),a("span",{staticClass:"seriationImg"})]),t._v(" "),a("li",{on:{click:function(s){t.clickseriation(s)}}},[t._v("购置日期正序"),a("span",{staticClass:"seriationImg"})]),t._v(" "),a("li",{on:{click:function(s){t.clickseriation(s)}}},[t._v("购置日期倒序"),a("span",{staticClass:"seriationImg"})])])]),t._v(" "),a("div",{staticClass:"edit_assetpagedata",attrs:{id:"assetpage"},on:{scroll:function(s){t.handleScroll(s)}}},t._l(t.assetedata,function(s){return a("div",{key:s.ASM_A1_10,staticClass:"edit_pagedata",attrs:{id:s.ASM_A1_10},on:{click:function(e){t.clickselect(s.ASM_A1_10,e)}}},[a("div",{staticClass:"pagedata_left"},[a("icon",{attrs:{id:"selectImg",type:"circle"}}),t._v(" "),a("icon",{staticStyle:{display:"none"},attrs:{id:"selectImgSuccess",type:"success"}})],1),t._v(" "),a("div",{staticClass:"pagedata_right"},[a("div",{staticClass:"edit_conttop"},[a("span",[t._v("资产编号:")]),a("span",[t._v(t._s(s.ASM_A1_20))])]),t._v(" "),a("div",{staticClass:"edit_showdata"},[a("div",[a("span",[t._v("资产名称:")]),a("span",{staticClass:"void"},[t._v(t._s(s.ASM_A1_50))])]),t._v(" "),a("div",[a("span",[t._v("资产分类:")]),a("span",{staticClass:"void"},[t._v(t._s(s.ASM_A1_60))])]),t._v(" "),a("div",[a("span",[t._v("规格型号:")]),a("span",{staticClass:"void"},[t._v(t._s(s.ASM_A1_210))])]),t._v(" "),"在用"==s.ASM_A1_120?a("div",{staticClass:"showImg1"}):"在库"==s.ASM_A1_120?a("div",{staticClass:"showImg2"}):"维修"==s.ASM_A1_120?a("div",{staticClass:"showImg3"}):"借用"==s.ASM_A1_120?a("div",{staticClass:"showImg4"}):"报废"==s.ASM_A1_120?a("div",{staticClass:"showImg5"}):"待报废"==s.ASM_A1_120?a("div",{staticClass:"showImg6"}):t._e(),t._v(" "),""!=s.imgUrl&&null!=s.imgUrl?a("img",{directives:[{name:"preview",rawName:"v-preview",value:s.imgUrl,expression:"item.imgUrl"}],staticClass:"edit_stockImg",attrs:{src:s.imgUrl,alt:"","preview-title-enable":"false","preview-nav-enable":"false"}}):t._e()])])])})),t._v(" "),a("div",{staticClass:"edit_foot"},[a("div",{on:{click:function(s){t.amend()}}},[t._v("修改")]),t._v(" "),a("i"),t._v(" "),a("div",{on:{click:t.delAsset}},[t._v("删除")]),t._v(" "),a("i"),t._v(" "),a("div",[t._v("更多")])])]),t._v(" "),a("div",{attrs:{id:"zhezhao"}})],1)},staticRenderFns:[]};var l=e("C7Lr")(a,i,!1,function(t){e("fmhm")},null,null);s.default=l.exports},fmhm:function(t,s){}});
//# sourceMappingURL=18.6a953a866e6acc528174.js.map