webpackJsonp([7],{E0tD:function(t,e){},WDJL:function(t,e,a){"use strict";(function(t){var e=a("3cXf");a.n(e),a("2rmn").a}).call(e,a("9AUj"))},lXNF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("WDJL");var i=a("m8zk"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div1"},[a("v-header",{attrs:{header:t.head}}),t._v(" "),a("div",{staticClass:"assettop"},[a("div",{staticStyle:{"font-weight":"600"}},[t._v("资产编号："),a("span",[t._v(t._s(t.serial))])]),t._v(" "),a("div",{staticStyle:{color:"#E96026"}},[t._v(t._s(t.state))])]),t._v(" "),a("section",{staticClass:"Assetcontent"},[a("div",{staticClass:"setclass"},[a("ul",[t._l(t.assetdata,function(e){return a("li",{key:e.id},[a("span",{staticClass:"setdistance"},[t._v(t._s(e.displayName)+" : ")]),a("span",[t._v(t._s(e.fieldVal))])])}),t._v(" "),a("div",{attrs:{id:"images"}},[a("span",{staticClass:"setdistance",staticStyle:{float:"left","font-size":"16px"}},[t._v("图片:")]),t._v(" "),a("div",{staticClass:"appendimg"},[t._l(t.assetImg,function(t){return a("img",{directives:[{name:"preview",rawName:"v-preview",value:"data:image/jpeg;base64,"+t.img,expression:"'data:image/jpeg;base64,'+itimg.img"}],key:t.id,attrs:{src:"data:image/jpeg;base64,"+t.img,alt:"","preview-title-enable":"false","preview-nav-enable":"false"}})}),t._v(" "),t._l(t.uploadimg,function(t){return a("img",{directives:[{name:"preview",rawName:"v-preview",value:t.img,expression:"itimg.img"}],key:t.id,attrs:{src:t.img,alt:"","preview-title-enable":"true","preview-nav-enable":"false"}})})],2)])],2)])]),t._v(" "),a("div",{staticClass:"finally"},[a("div",{staticClass:"assetrule"},[a("el-input",{attrs:{placeholder:""},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}},[a("template",{slot:"prepend"},[t._v("备注")])],2)],1),t._v(" "),t.pic?a("div",{staticClass:"assetrule"},[a("el-button",{staticStyle:{width:"60%","margin-right":"5px"},attrs:{disabled:t.display,type:"primary",icon:"mackimg"},on:{click:function(e){t.clickdian()}}},[t._v("盘点")]),t._v(" "),a("el-button",{staticStyle:{width:"34%"},attrs:{disabled:t.display,type:"primary",icon:"photographimg"}},[t._v("拍照")]),t._v(" "),a("input",{staticClass:"imgupload",attrs:{disabled:t.display,type:"file",capture:"camera",accept:"image/*",multiple:""},on:{change:function(e){t.clickpick(e)}}})],1):a("div",{staticClass:"assetrule",staticStyle:{"margin-top":"8px","z-index":"2000"}},[a("el-button",{staticStyle:{width:"60%",background:"#409EFF",height:"32px","margin-right":"5px",padding:"0"},attrs:{disabled:t.display,type:"primary",icon:"mackimg"},on:{click:function(e){t.clickdian()}}},[t._v("盘点")]),t._v(" "),a("yd-button",{staticStyle:{width:"36%",background:"#409EFF",display:"inline-block",height:"32px","margin-top":"0px","font-size":"16px"},attrs:{disabled:t.display,size:"large"},nativeOn:{click:function(e){t.show2=!0}}},[t._v("拍照")]),t._v(" "),a("yd-actionsheet",{attrs:{items:t.myItems1,cancel:"取消"},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}})],1)]),t._v(" "),t.show2?t._e():a("stockfoot",{attrs:{pcId:this.$route.query.pcid,planId:this.$route.query.planId}})],1)},staticRenderFns:[]};var n=function(t){a("E0tD")},l=a("C7Lr")(i.a,s,!1,n,null,null);e.default=l.exports},m8zk:function(t,e,a){"use strict";(function(t){var i=a("3cXf"),s=a.n(i),n=a("2rmn");e.a={components:{stockfoot:n.a},data:function(){var e=this;return{head:"资产盘点",assetdata:[],state:this.$route.query.state,serial:this.$route.query.serial,remark:"",display:!1,assetImg:[],uploadimg:[],shangimg:[],ceshi:"",show2:!1,pic:"",myItems1:[{label:"拍照",callback:function(){e.getImage();var a=e;t.bus.$off("global.img"),t.bus.$on("global.img",function(t){a.shangimg.push({img:t}),a.uploadimg.push({img:t,id:""})})}},{label:"从相册中偷取",callback:function(){e.galleryImg();var a=e;t.bus.$off("global.img"),t.bus.$on("global.img",function(t){a.shangimg.push({img:t}),a.uploadimg.push({img:t,id:""})})}}]}},methods:{assetGetdata:function(){var t=this,e={pcId:this.$route.query.pcid,assetId:this.$route.query.assetid};this.$http.get("/API/stockservice/GetAssetDetail",{params:{data:s()(e)}},{emulateJSON:!0}).then(function(e){t.assetdata=e.data.immobilization.data,t.Whether()}),this.$http.get("/API/stockservice/GetC4Img",{params:{data:s()(e)}},{emulateJSON:!0}).then(function(e){t.assetImg=e.data})},Whether:function(){this.assetdata.forEach(function(t){"盘点时间"==t.displayName&&null!=t.fieldVal&&(this.display=!0)},this)},clickdian:function(){var t=this;this.$http.post("/API/stockservice/AssetStock",{assetId:this.$route.query.assetid,pcId:this.$route.query.pcid,stockMemo:this.remark,imgData:this.shangimg},{emulateJSON:!0}).then(function(e){t.$message(e.data.resultMsg),"1"==e.data.resultNum&&t.$router.go(-1)})},clickpick:function(t){for(var e=t.target,a=e.files.length,i=this,s=0;s<a;s++){var n=e.files[s],l=(e.files[s].size/1024/1024).toFixed("3"),c=new FileReader;c.onload=function(t){compress(t.target.result,l,function(t){i.shangimg.push({img:t}),i.uploadimg.push({img:t,id:l})})},c.readAsDataURL(n)}}},mounted:function(){this.assetGetdata(),this.judge(),this.pic=t.picth}}}).call(e,a("9AUj"))}});
//# sourceMappingURL=7.4f4a623db2b0700a4dfe.js.map